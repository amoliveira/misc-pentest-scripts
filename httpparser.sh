#!/bin/bash

# Leonardo Militz
# Warning! Don't use this if your current directory has an index.html file.

if [ "$1" == "" ]; then
	echo "Wrong syntax"
	echo "Format: $0 [ARG]"
	echo "Example: $0 site.com.br"
	exit 1
fi

link=$1

wget -O index.html $link -q 

if [[ $(cat index.html) == "" ]]; then
	echo "Error, invalid URL"
	exit 1
fi

echo "Scanning $1..."
echo ""

lista=$(cat index.html | grep "href" | cut -d '"' -f 2 | grep "http\|https" | cut -d "/" -f 3)
rm index.html

for dnsHost in $lista; do
	host $dnsHost | grep "has address"
done